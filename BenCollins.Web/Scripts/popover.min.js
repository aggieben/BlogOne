var Popover=function(){function n(t){var r,i,u;i=document.createElement("div");i.setAttribute("class","bo-popover");i.innerHTML=(u=t.content)!=null?u:"";document.body.appendChild(i);switch(t.position){case"selection":r=this._getSelectionCoords();i.style.left=""+r.x+"px";i.style.top=""+r.y+"px";i.style.marginTop="-"+Math.floor(10+i.clientHeight)+"px";i.style.marginLeft="-"+Math.floor(i.clientWidth/2)+"px"}$(i).on("click keyup",function(n){if(n.keyCode!==27)return!1});if(this.div=i,n._current==null){n._current=this;$(document).on("click keyup",function(t){var i;return console.log(t),(i=n._current)!=null&&i.remove(),n._current=null})}}return n._current=null,n.prototype.remove=function(){return this.div.parentNode.removeChild(this.div)},n.prototype.contains=function(n){return this.div.contains(n)},n.prototype._getSelectionElement=function(){var n;return n=document.selection,n||(n=window.getSelection()),n.anchorNode.parentElement},n.prototype._getCoordsRelativeToElement=function(){},n.prototype._getSelectionCoords=function(){var i=document.selection,t,r=0,u=0,n;return i?i.type!="Control"&&(t=i.createRange(),n=t.getClientRects()[0],console.log("rect: "),console.log(n),r=t.boundingLeft+n.width/2,u=t.boundingTop):window.getSelection&&(i=window.getSelection(),i.rangeCount&&(t=i.getRangeAt(0).cloneRange(),t.getClientRects&&(n=t.getClientRects()[0],console.log("rect: "),console.log(n),r=n.left+n.width/2,u=n.top))),{x:r,y:u}},n}()